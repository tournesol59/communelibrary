<?php

public class contactmod {

   public function findAll() : array {
      $contacts=[];
      try {
         $sql = 'SELECT id, name, email, birthdate, useroption, contact, address FROM '. $table.' WHERE contact=true';
         $query = $_connection->prepare($sql, [PDO::ATTR_CURSOR => PDO::CURSOR_FWDONLY]);
         $query->execute();
         $contacts = $query->fetchAll();
         return $contacts;

      } catch (PDOException $exception) {
         echo "Erreur de connexion : " .$exception->getMessage();
         return [];
      }
   }

   public function findByName($contactname) : array {
      $contacts=[];
      try {
         $sql = 'SELECT id, name, email, birthdate, useroption, contact, address FROM '. $table .'WHERE name= :contactame';
         $query = $_connection->prepare($sql, [PDO::ATTR_CURSOR => PDO::CURSOR_FWDONLY]);
         $query->execute(['contactname' => $contactname);
         $contacts = $query->fetchAll();
         if (isset($contacts)) {
            return $contacts[0];  // return a unique result
         }
         else {
            return [];
         }
      } catch (PDOException $exception) {
         echo "Erreur de connexion : " .$exception->getMessage();
         return [];
      }
   }

}

?>
